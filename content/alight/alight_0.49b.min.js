(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,n){var t,r,o=n?n:0;if(!this)throw new TypeError;if(r=this.length,0===r||o>=r)return-1;for(0>o&&(o=r-Math.abs(o)),t=o;r>t;t++)if(this[t]===e)return t;return-1}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),window.f$||(window.f$={}),f$.browser=function(){var e,n=navigator.appName,t=navigator.userAgent.toLowerCase(),r=t.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return r&&null!=(e=t.match(/version\/([\.\d]+)/i))&&(r[2]=e[1]),r=r?[r[1],r[2]]:[n,navigator.appVersion,"-?"],{name:r[0],version_string:r[1],version:Number(r[1].match(/\d+/))}}();var e=!1,n=!1,t=!1,r=window.$;if(f$.__jquery?(t=5,r=f$.__jquery):(("chrome"===f$.browser.name||"safari"===f$.browser.name)&&(e=!0),"firefox"===f$.browser.name&&(n=f$.browser.version),"msie"===f$.browser.name&&(t=f$.browser.version)),f$.text=t&&8>t?function(e,n){r(e).text(n)}:function(e,n){return 2!==arguments.length?e.textContent||e.innerText:(void 0!==e.textContent?e.textContent=n:e.innerText=n,void 0)},f$.html=t&&6>t?function(e,n){return 2!==arguments.length?r(e).html():(r(e).html(n),void 0)}:function(e,n){return 2!==arguments.length?e.innerHTML:(e.innerHTML=n,void 0)},f$.createComment=function(e){return document.createComment(e)},f$.before=function(e,n){var t=e.parentNode;t.insertBefore(n,e)},f$.after=function(e,n){var t=e.parentNode,r=e.nextSibling;r?t.insertBefore(n,r):t.appendChild(n)},f$.remove=function(e){var n=e.parentNode;n&&n.removeChild(e)},t&&9>t?f$.on=function(e,n,t){r(e).on(n,t)}:(f$.on=function(e,n,t){e.addEventListener(n,t,!1)},f$.off=function(e,n,t){e.removeEventListener(n,t,!1)}),f$.clone=function(e){var n=e.cloneNode(!0);if(e.ma_skip&&e.ma_skip.length){n.ma_skip=[];for(var t=0;e.ma_skip.length>t;t++)n.ma_skip[t]=e.ma_skip[t]}return n},f$.find=t&&8>t?function(e,n){return r(e).find(n)}:function(e,n){return e.querySelectorAll(n)},t&&8>t?(f$.attr=function(e,n,t){return r(e).attr(n,t)},f$.removeAttr=function(e,n){r(e).removeAttr(n)}):(f$.attr=function(e,n,t){return 2===arguments.length?e.getAttribute(n):(e.setAttribute(n,t),void 0)},f$.removeAttr=function(e,n){e.removeAttribute(n)}),f$.isFunction=function(e){var n={};return e&&"[object Function]"===n.toString.call(e)},f$.isObject=function(e){var n={};return e&&"[object Object]"===n.toString.call(e)},f$.isArray=function(e){return e instanceof Array},f$.val=t&&6>t?function(e,n){return 1===arguments.length?r(e).val():(r(e).val(n),void 0)}:function(e,n){return 1===arguments.length?e.value:(e.value=n,void 0)},f$.prop=t&&6>t?function(e,n,t){return 2===arguments.length?r(e).prop(n):(r(e).prop(n,t),void 0)}:function(e,n,t){return 2===arguments.length?e[n]:(e[n]=t,void 0)},t&&8>t?(f$.addClass=function(e,n){r(e).addClass(n)},f$.removeClass=function(e,n){r(e).removeClass(n)}):(f$.addClass=function(e,n){e.classList?e.classList.add(n):e.className+=" "+n},f$.removeClass=function(e,n){e.classList?e.classList.remove(n):e.className=e.className.replace(RegExp("(^| )"+n.split(" ").join("|")+"( |$)","gi")," ")}),t&&8>t?(f$.show=function(e){r(e).show()},f$.hide=function(e){r(e).hide()}):(f$.show=function(e){e.style.display=""},f$.hide=function(e){e.style.display="none"}),f$.children=t&&9>t||n&&4>n?function(e){return r(e).children()}:function(e){return e.children},f$.childNodes=function(e){for(var n=[],t=e.childNodes,r=0;t.length>r;r++)n.push(t[r]);return n},f$.getAttributes=t&&8>t?function(e){var n={},t=r(e);return t.length&&r.each(t.get(0).attributes,function(e,r){var r=r.nodeName||r.name;e=t.attr(r),void 0!=e&&e!==!1&&(n[r]=e)}),n}:function(e){for(var n,t={},r=e.attributes,o=0,i=r.length;i>o;o++)n=r.item(o),t[n.nodeName]=n.nodeValue;return t},f$.ready=t&&9>t?function(e){r(e)}:function(){function e(){t=!0,f$.off(document,"DOMContentLoaded",e);for(var r=0;n.length>r;r++)n[r]();n.length=0}var n=[],t=!1;return f$.on(document,"DOMContentLoaded",e),function(e){t?e():n.push(e)}}(),t&&9>t){var o=function(){};f$.ajax=function(e){r.ajax({url:e.url,type:e.type||"GET"}).then(e.success||o,e.error||o)}}else f$.ajax=function(e){request=new XMLHttpRequest,request.open(e.type||"GET",e.url,!0),request.send(),e.success&&(request.onload=function(){request.status>=200&&400>request.status?e.success(request.responseText):e.error&&e.error()}),e.error&&(request.onerror=e.error)};t&&8>t?(f$.focus=function(e){r(e).focus()},f$.blur=function(e){r(e).blur()}):(f$.focus=function(e){e.focus()},f$.blur=function(e){e.blur()})})();(function(){var Scope,alight,attrBinding,compile_cache,copyArray,directivePreprocessor,get_time,process,sortByPriority,testDirective,textBinding;window.alight=alight={version:"0.49.3-beta",debug:!1,autostart:!0,scopes:[],controllers:{},filters:{},utilits:{},directives:{al:{},bo:{}},text:{}},alight.directivePreprocessor=directivePreprocessor=function(t,e,i){var r,n,s,o;if(e=e.replace(/(-\w)/g,function(t){return t.substring(1).toUpperCase()}),s=alight.directives[t][e],!s)throw"Directive not found: "+t+"."+e;if(r={},f$.isFunction(s))r.init=s;else{if(!f$.isObject(s))throw"Wrong directive: "+t+"."+e;for(n in s)o=s[n],r[n]=o}if(r.priority=s.priority||0,r.restrict=s.restrict||"A",0>r.restrict.indexOf(i.attr_type))throw"Directive has wrong binding (attribute/element): "+e;return r.$init=function(n,s,o,a){var c,l,u,p,h;for(l={element:n,expression:s,scope:o,env:a,ns:t,name:e,args:i,directive:r,result:{}},h=directivePreprocessor.ext,u=0,p=h.length;p>u;u++)c=h[u],c.fn.call(l);return l.result},r},function(){var t;return directivePreprocessor.ext=t=[],t.push({code:"init",fn:function(){return this.result=this.directive.init?this.directive.init(this.element,this.expression,this.scope,this.env)||{}:{}}}),t.push({code:"template",fn:function(){return this.directive.template?f$.html(this.element,this.directive.template):void 0}}),t.push({code:"scope",fn:function(){var t;return this.doBinding=!1,this.directive.scope?(t=this.scope,this.scope=t.$new(),this.result.owner=!0,this.doBinding=!0):void 0}}),t.push({code:"link",fn:function(){return this.directive.link?this.directive.link(this.element,this.expression,this.scope,this.env):void 0}}),t.push({code:"scopeBinding",fn:function(){return this.doBinding?alight.applyBindings(this.scope,this.element,{skip_attr:this.env.attrName}):void 0}})}(),testDirective=function(t,e,i){var r,n,s,o,a;if(!(i.skip_attr.indexOf(t)>=0))return s=t.indexOf("-"),0>s?("A"===i.attr_type&&i.list.push({priority:0,is_attr:!0,name:t,value:e,element:i.element}),void 0):(a=t.substring(0,s),o=t.substring(s+1),alight.directives[a]?(n=alight.directivePreprocessor(a,o,i),r={name:o,directive:n,priority:n.priority,value:e,attrName:t},i.list.push(r)):("A"===i.attr_type&&i.list.push({priority:0,is_attr:!0,name:t,value:e,element:i.element}),void 0))},sortByPriority=function(t,e){return t.priority===e.priority?0:t.priority>e.priority?-1:1},process=function(t,e,i){var r,n,s,o,a,c,l,u,p,h,f,g,y,d,v,m,$,_,x,b;if(i=i||{},d=!1,y=i.skip_attr||[],y instanceof Array||(y=[y]),e.ma_skip?y=e.ma_skip=e.ma_skip.concat(y):e.ma_skip=y,!i.skip_top){r={list:h=[],element:e,skip_attr:y,attr_type:"E",scope:t},n=e.nodeName.toLowerCase(),testDirective(n,"",r),r.attr_type="A",o=f$.getAttributes(e);for(n in o)s=o[n],testDirective(n,s,r);for(h=h.sort(sortByPriority),v=0,$=h.length;$>v;v++)if(a=h[v],!a.skip)if(a.is_attr)attrBinding(t,a);else{c=a.directive,u={attrName:a.attrName,attributes:h};try{g=c.$init(e,a.value,t,u),g&&g.start&&g.start()}catch(w){l=w,console.error("Error in directive:",a.name),p="string"==typeof l?l:l.stack,console.error(p)}if(g&&g.owner){d=!0;break}}}if(!d){for(x=f$.childNodes(e),b=[],m=0,_=x.length;_>m;m++)f=x[m],f&&(1===f.nodeType?b.push(process(t,f)):3===f.nodeType?b.push(textBinding(t,f)):b.push(void 0));return b}},attrBinding=function(t,e){var i,r,n;return r=e.value,0>r.indexOf(alight.utilits.pars_start_tag)?void 0:(i=function(t){return f$.attr(e.element,e.name,t)},n=t.$watchText(r,i),i(n.value))},textBinding=function(t,e){var i,r,n;return r=e.data,0>r.indexOf(alight.utilits.pars_start_tag)?void 0:(i=function(t){return e.data=t},n=t.$watchText(r,i),i(n.value))},Scope=function(){return this instanceof Scope?(this.$system={watches:{},watch_any:[],root:this,children:[],scan_callbacks:[],destroy_callbacks:[]},alight.debug&&alight.scopes.push(this),this):new Scope},alight.Scope=Scope,Scope.prototype.$watch=function(t,e,i){var r,n,s,o,a,c,l;if(a=this,i===!0?i={is_array:!0}:i||(i={}),f$.isFunction(t))n=t,s=alight.utilits.getId();else{if(n=null,s=t.trim(),"$any"===s)return a.$system.watch_any.push(e);if("$destroy"===s)return a.$system.destroy_callbacks.push(e);s=i.is_array?"a#"+s:"#"+s}return l=a.$system.watches,r=l[s],r||(n=n||a.$compile(t),c=n(),i.is_array&&(c=copyArray(c)),l[s]=r={is_array:!!i.is_array,value:c,callbacks:[],exp:n}),r.callbacks.push(e),o={$:r,value:r.value,stop:function(){var t;return t=function(){var t;return t=r.callbacks.indexOf(e),t>=0?r.callbacks.splice(t,1):void 0},"scaning"===a.$system.root.$system.status?a.$scan(t):t()}},i.init&&e(o.value),o},Scope.prototype.$fire=function(t){var e;return(e=this.$system.watches[t])?e.fire=!0:void 0},compile_cache={},Scope.prototype.$compile=function(src_exp,cfg){var ainput,e,exp,ff,func,hash,no_return,result,scope;if(cfg=cfg||{},hash=src_exp+"#",hash+=cfg.no_return?"+":"-",cfg.input&&(hash+=cfg.input.join(",")),scope=this,func=compile_cache[hash])return function(){var t,e;try{return func.apply(scope,arguments)}catch(i){return t=i,e="string"==typeof t?t:t.stack,console.error(src_exp,e)}};exp=src_exp,no_return=cfg.no_return||!1,ff=alight.utilits.parsExpression(exp,{input:cfg.input}),exp=ff[0],ainput=cfg.input?cfg.input.join(","):"",result=no_return?"(function(){ return (function("+ainput+") { "+exp+" }); })()":"(function(){ return (function("+ainput+") { return ( "+exp+" ) }); })()";try{func=eval(result)}catch(_error){throw e=_error,"Wrong expression: "+exp}return func=alight.utilits.filterBuilder(scope,func,ff.slice(1)),compile_cache[hash]=func,function(){var t;try{return func.apply(scope,arguments)}catch(i){return e=i,t="string"==typeof e?e:e.stack,console.error(src_exp,t)}}},Scope.prototype.$eval=function(t){var e,i;return i=this,e=i.$compile(t),e()},Scope.prototype.$getValue=function(t){var e,i,r,n,s;for(e=this,s=t.split("."),r=0,n=s.length;n>r;r++)i=s[r],e=(e||{})[i];return e},Scope.prototype.$setValue=function(t,e){var i,r,n,s,o,a,c;for(n=this,r=t.split("."),s=a=0,c=r.length-2;c>=a;s=a+=1)o=r[s],i=n[o],void 0===i&&(n[o]=i={}),n=i;return o=r[r.length-1],n[o]=e},Scope.prototype.$new=function(){var t,e,i;return i=this,t=function(){},t.prototype=i,e=new t,e.$parent=i,e.$system={watches:{},watch_any:[],root:i.$system.root,children:[],destroy_callbacks:[]},i.$system.children.push(e),e},Scope.prototype.$destroy=function(){var t,e,i,r,n,s,o,a,c,l;for(r=this,c=r.$system.destroy_callbacks,n=0,o=c.length;o>n;n++)t=c[n],t(r);for(r.$system.destroy_callbacks=[],l=r.$system.children.slice(),s=0,a=l.length;a>s;s++)i=l[s],i.$destroy();return r.$parent&&(e=r.$parent.$system.children.indexOf(r),r.$parent.$system.children.splice(e,1)),r.$parent=null,r.$system.watches={},r.$system.watch_any.length=0},get_time=function(){return(new Date).getTime()},Scope.prototype.$scan=function(t){var e,i,r,n,s,o,a,c,l,u,p,h,f,g,y;if(t=t||{},f$.isFunction(t)&&(t={callback:t}),n=this.$system.root,l=t.top||n,t.callback&&n.$system.scan_callbacks.push(t.callback),"scaning"!==n.$system.status){n.$system.status="scaning",a=get_time();try{for(r=10,y=[];r>0;){for(i={silent:!1,changes:0,size:0,any:[],queue:[l]};i.queue.length;)o=i.queue.shift(),o.$scanScope(i);if(i.changes)for(g=i.any,u=0,h=g.length;h>u;u++)e=g[u],e();if(alight.debug&&(c=get_time()-a,console.log("$scan "+c+"ms",i.changes,"of",i.size)),!i.changes)break;if(r--,!r)throw"Infinity loop detected";y.push(void 0)}return y}finally{for(n.$system.status=null,s=n.$system.scan_callbacks.slice(),n.$system.scan_callbacks.length=0,p=0,f=s.length;f>p;p++)e=s[p],e.call(n)}}},copyArray=function(t){var e,i,r,n;if(!f$.isArray(t))return t;for(n=[],i=0,r=t.length;r>i;i++)e=t[i],n.push(e);return n},Scope.prototype.$scanScope=function(t){var e,i,r,n,s,o,a,c,l,u,p,h,f,g,y,d,v,m,$,_,x,b,w,k,S,B,A;c=this,w=c.$system.watches;for(r in w){if(g=w[r],alight.debug&&(l=get_time(),t.size++),o=!1,f=g.exp(),g.value===f)g.fire&&(o=!0,g.is_array&&(g.value=copyArray(f)));else if("object"==typeof f)if(g.is_array)if(f=f||[],f$.isArray(g.value)&&g.value.length===f.length)for(s=y=0,$=f.length;$>y;s=++y)h=f[s],g.value[s]!==h&&(g.value[s]=h,o=!0);else o=!0,g.value=copyArray(f);else g.value=f,o=!0;else g.value=f,o=!0;if(g.fire=!1,alight.debug&&(a=get_time()),o&&!t.silent)for(alight.debug&&console.log("changed:",r),t.changes++,k=g.callbacks,d=0,_=k.length;_>d;d++)e=k[d],e.call(c,f);alight.debug&&(n=get_time(),u=a-l,p=n-a,u+p>50&&console.error("watch "+r+" = "+u+"ms/"+p+"ms"))}for(S=c.$system.children,v=0,x=S.length;x>v;v++)i=S[v],t.queue.push(i);if(c.$system.watch_any.length){for(B=c.$system.watch_any,A=[],m=0,b=B.length;b>m;m++)e=B[m],A.push(t.any.push(e));return A}},Scope.prototype.$compileText=function(t,e){var i,r,n,s,o,a,c,l,u;if(o=this,e=e||{},0>t.indexOf(alight.utilits.pars_start_tag))return e.result_on_static?t:function(){return t};for(n=alight.utilits.parsText(t),i=function(){var t,e,i,r,s;for(e="",r=0,s=n.length;s>r;r++)t=n[r],i=t.fn?t.fn():t.value,null!==i&&void 0!==i&&(e+=i);return e},c=0,l=0,u=n.length;u>l;l++)r=n[l],"expression"===r.type&&("="===r.list[0][0]&&(r.list[0]="#bindonce "+r.list[0].slice(1)),s=r.list.join(" | "),"#"===s[0]?(alight.text.$base(o,r),r["static"]||c++):(r.fn=o.$compile(s),c++));return c?i:(a=i(),e.result_on_static?a:function(){return a})},Scope.prototype.$evalText=function(t){return this.$compileText(t)()},Scope.prototype.$watchText=function(t,e){var i,r,n,s,o;if(n=this,o=n.$system.watches,i=o[t],!i){if(r=n.$compileText(t,{result_on_static:!0}),!f$.isFunction(r))return{value:r};s=r(),o[t]=i={is_array:!1,value:s,callbacks:[],exp:r}}return i.callbacks.push(e),i},alight.nextTick=function(){var t,e,i;return i=null,e=[],t=function(){var t,r,n,s,o,a,c;for(i=null,a=0,c=e.length;c>a;a++){s=e[a],t=s[0],o=s[1];try{t.call(o)}catch(l){r=l,n="string"==typeof r?r:r.stack,console.error(n)}}return e=[]},function(r){return e.push([r,this]),i?void 0:i=setTimeout(t,1)}}(),alight.getController=function(t){var e;if(e=alight.controllers[t]||window[t],!e)throw"Controller isn't found: "+t;if(!(e instanceof Function))throw"Wrong controller: "+t;return e},alight.getFilter=function(t){if(!alight.filters[t])throw"Filter not found: "+t;return alight.filters[t]},alight.text.$base=function(t,e){var i,r,n,s,o,a;if(n=e.list[0],o=n.indexOf(" "),0>o?(r=n.slice(1),n=""):(r=n.slice(1,o),n=n.slice(o)),i=alight.text[r],!i)throw"No directive alight.text."+r;return a=function(t){return e.value=t},e.list.length>1&&(s=alight.utilits.filterBuilder(t,null,e.list.slice(1)),a=function(t){return e.value=s(t)}),i(a,n,t,{data:e})},alight.applyBindings=function(t,e,i){if(!e)throw"No element";return t||(t=new Scope),i=i||{},t.$scanScope({silent:!0,queue:[],any:[]}),process(t,e,i)},alight.bootstrap=function(t){var e,i,r,n,s,o,a;for(t||(t=f$.find(document,"[al-app]")),f$.isArray(t)||void 0!==t.length||(t=[t]),a=[],s=0,o=t.length;o>s;s++)r=t[s],i=f$.attr(r,"al-app"),n=alight.Scope(),i&&(e=alight.getController(i),e(n)),a.push(alight.applyBindings(n,r,{skip_attr:"al-app"}));return a},f$.ready(function(){return alight.autostart?alight.bootstrap():void 0})}).call(this);(function(){alight.utilits.getId=function(){var t,n;return n=function(){var t,n,r,l,i,u;for(u="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),r=Math.floor((new Date).valueOf()/1e3)-1388512800,i="";r>0;)t=Math.floor(r/62),l=62*t,n=r-l,r=t,i=u[n]+i;return i}(),t=1,function(){return n+"#"+t++}}(),alight.utilits.filterBuilder=function(t,n,r){var l,i,u,e,a,f,o,c;if(!r||!r.length)return n;for(o=0,c=r.length;c>o;o++)i=r[o],l=i.match(/\s*([\w\d_]+?)\s*:\s*(.*?)\s*$/),l?(a=l[1],f=l[2]):(a=i.trim(),f=null),u=alight.getFilter(a,t,f),e=u.call(t,f,t),n=n?function(t,n){return function(r){return t.call(this,n.call(this,r))}}(e,n):e;return n}}).call(this);(function(){var t;t=["break","do","instanceof","typeof","case","else","new","var","catch","finally","return","void","continue","for","switch","while","debugger","function","this","with","default","if","throw","delete","in","try","class","enum","extends","super","const","export","import","null","true","false","undefined"],alight.utilits.parsExpression=function(i,n){var r,l,e,s,u,a,h,f,o;if(n=n||{},s=n.input||[],e=0,h=[],a=0,f=[],u=function(n,r,l,o){var c,g,p,d,v;for(d="",v=-1,p=function(){var i;if(d&&!(t.indexOf(d)>=0||(i=d.split(".")[0],s.indexOf(i)>=0||"this."===d.slice(0,5)||d[0].match(/[\d\.]/))))return f.push(v)};i.length>e;){if(c=i[e],e+=1,g=i[e],l&&(c.match(/[\d\w_\.\$]/)?(d||(v=e-1),d+=c):(p(),d="")),c===r)return;"("!==c||o?"["!==c||o?"{"!==c||o?'"'===c?u(n+1,'"',!1,!0):"'"===c?u(n+1,"'",!1,!0):"|"===c&&0===n&&("|"===g?e+=1:(l=!1,h.push(i.substring(a,e-1)),a=e)):u(n+1,"}",!1):u(n+1,"]",l):u(n+1,")",l)}return 0===n&&h.push(i.substring(a)),p()},u(0,null,!0),f.length){for(r=h[0],o=f.length-1;o>=0;o+=-1)l=f[o],r=r.slice(0,l)+"this."+r.slice(l);h[0]=r}return alight.debug&&console.log("parser",h),h},alight.utilits.pars_start_tag="{{",alight.utilits.pars_finish_tag="}}",alight.utilits.parsText=function(t){var i,n,r,l,e,s,u,a,h;return h=alight.utilits.pars_start_tag,n=alight.utilits.pars_finish_tag,u=[],l=0,s=0,r=function(i){var n;return i=i||1,n=t.substring(s,l-i),s=l,n},a=null,e=function(i,s,h){var f,o,c;for(i||(a={type:"expression",list:[]},u.push(a)),c=null,f=null;t.length>l;){if(c=f,f=t[l],l+=1,o=c+f,f===s)return;if(!h){if(o===n&&0===i)return a.list.push(r(2)),!0;"("===f?e(i+1,")"):"{"===f?e(i+1,"}"):'"'===f?e(i+1,'"',!0):"'"===f?e(i+1,"'",!0):"|"===f&&0===i&&a.list.push(r())}}},i=function(){var i,n,s,a,f;for(a=null,i=null;t.length>l;)if(a=i,i=t[l],l+=1,n=a+i,n===h&&(s={type:"text",value:r(2)},u.push(s),!e(0)))throw"Wrong expression"+t;return f=r(-1),f?u.push({type:"text",value:f}):void 0},i(),u},alight.utilits.filterBuilder=function(t,i,n){var r,l,e,s,u,a,h;if(!n||!n.length)return i;for(a=0,h=n.length;h>a;a++){if(l=n[a],r=l.match(/\s*([\w\d_]+?)\s*:\s*(.*?)\s*$/),r?(s=r[1],u=r[2]):(s=l.trim(),u=null),!alight.filters[s])throw"Filter not found: "+s;e=alight.filters[s].call(t,u,t),i=i?function(t,i){return function(n){return t.call(this,i.call(this,n))}}(e,i):e}return i}}).call(this);(function(){var n,t,r,e,i,o,u,a,c;for(alight.text.bindonce=function(n,t,r,e){return e.data["static"]=!0,n(r.$eval(t))},t=alight.directives.al,t.text=function(n,t,r){var e,i;return e="",i={start:function(){return i.watchModel(),i.initDom()},setter:function(t){return(void 0===t||null===t)&&(t=""),f$.text(n,t)},watchModel:function(){var n;return n=r.$watch(t,i.setter),e=n.value},initDom:function(){return i.setter(e)}}},t.value=function(n,t,r){var e,i;return e=null,i={changing:!1,makeSetter:function(){return i.setter=r.$compile(t+" = $_value",{no_return:!0,input:["$_value"]})},onDom:function(){return f$.on(n,"keydown",i.updateModel)},updateModel:function(){return alight.nextTick(function(){var t;return t=f$.val(n),i.changing=!0,i.setter(t),r.$scan(function(){return i.changing=!1})})},watchModel:function(){var n;return n=r.$watch(t,i.updateDom),e=n.value},updateDom:function(t){return i.changing?void 0:void 0!==t&&null!==t?f$.val(n,t):void 0},initDom:function(){return i.updateDom(e)},start:function(){return i.makeSetter(),i.onDom(),i.watchModel(),i.initDom()}}},n=function(n){return function(t,r,e){var i;return i={callback:e.$compile(r,{no_return:!0}),start:function(){return i.onDom()},onDom:function(){return f$.on(t,n,i.doCallback)},doCallback:function(n){return n.preventDefault(),n.stopPropagation(),f$.attr(t,"disabled")?void 0:(i.callback(),e.$scan())}}}},t.click=n("click"),t.dblclick=n("dblclick"),t.submit=function(n,t,r){var e;return e={callback:r.$compile(t,{no_return:!0}),start:function(){return e.onDom()},onDom:function(){return f$.on(n,"submit",e.doCallback)},doCallback:function(n){return n.preventDefault(),n.stopPropagation(),e.callback(),r.$scan()}}},t.controller={priority:500,restrict:"AE",init:function(n,t,r,e){var i,o;return o=r.$new(),t&&(i=alight.getController(t),i(o)),alight.applyBindings(o,n,{skip_attr:e.attrName}),{owner:!0}}},t.checked=function(n,t,r){var e,i;return e=!1,i={changing:!1,start:function(){return i.makeSetter(),i.onDom(),i.watchModel(),i.initDom()},makeSetter:function(){return i.setter=r.$compile(t+" = $_value",{no_return:!0,input:["$_value"]})},onDom:function(){return f$.on(n,"change",i.updateModel)},updateModel:function(){var t;return t=f$.prop(n,"checked"),i.changing=!0,i.setter(t),r.$scan(function(){return i.changing=!1})},watchModel:function(){var n;return n=r.$watch(t,i.updateDom),e=!!n.value},updateDom:function(t){return i.changing?void 0:f$.prop(n,"checked",!!t)},initDom:function(){return i.updateDom(e)}}},t.css=function(n,t,r){var e;return e={start:function(){return e.parsLine(),e.prepare()},parsLine:function(){var n;e.list=n=[];for(var r,i=/[\w\d\-\._]+\s*?:/gi,o=-1,u=0;result=i.exec(t);)u=result.index,o>=0&&(r=t.substring(o,u).trim(),","==r[r.length-1]&&(r=r.substring(0,r.length-1)),n.push(r)),o=u;return o>=0&&n.push(t.substring(o)),null},prepare:function(){var n,t,i,o,u,a,c,l,f,s;for(f=e.list,s=[],c=0,l=f.length;l>c;c++)o=f[c],i=o.split(":"),t=i[0].trim(),a=i[1].trim(),n=function(n){return function(t){return e.draw(n,t)}}(t),u=r.$watch(a,n),s.push(n(u.value));return s},draw:function(t,r){return r?f$.addClass(n,t):f$.removeClass(n,t)}}},e=function(n){var t;return t={priority:700,init:function(t,r,e){var i;return i=e.$eval(r),!i===n?(f$.remove(t),{owner:!0}):void 0}}},alight.directives.bo["if"]=e(!0),alight.directives.bo.ifnot=e(!1),i=function(n){return{priority:700,init:function(t,r,e,i){var o,u,a,c,l,f;return c=null,u=null,o=null,f=null,a=!1,l={owner:!0,start:function(){return l.prepare(),l.watchModel(),l.initUpdate()},prepare:function(){return o=t,f=f$.createComment(" "+i.attrName+": "+r+" "),f$.before(t,f),f$.remove(t)},update:function(t){if(!t===n){if(!u)return;return u.$destroy(),l.removeDom(c),u=null,c=null}if(!u)return c=f$.clone(o),l.insertDom(f,c),u=e.$new(),alight.applyBindings(u,c,{skip_attr:i.attrName})},watchModel:function(){var n;return n=e.$watch(r,l.update),a=!!n.value},initUpdate:function(){return l.update(a)},removeDom:function(n){return f$.remove(n)},insertDom:function(n,t){return f$.after(n,t)}}}}},t["if"]=i(!0),t.ifnot=i(!1),t.show=function(n,t,r){var e,i;return e=!1,i={showDom:function(){return f$.show(n)},hideDom:function(){return f$.hide(n)},updateDom:function(n){return n?i.showDom():i.hideDom()},watchModel:function(){var n;return n=r.$watch(t,i.updateDom),e=n.value},initDom:function(){return i.updateDom(e)},start:function(){return i.watchModel(),i.initDom()}}},t.hide=function(n,r,e,i){var o;return o=t.show(n,r,e,i),o.updateDom=function(n){return n?o.hideDom():o.showDom()},o},t.app={priority:2e3,init:function(){return{owner:!0}}},t.stop={priority:-10,restrict:"AE",init:function(){return{owner:!0}}},t.init=function(n,t,r){return r.$compile(t,{no_return:!0})()},t.include={priority:100,init:function(n,t,r,e){var i,o,u;return i=null,o=function(t){return i&&(i.$destroy(),i=null),t?f$.ajax({url:t,success:function(t){return f$.html(n,t),i=r.$new(),alight.applyBindings(i,n,{skip_attr:e.attrName})},error:function(){return f$.html(n,"")}}):(f$.html(n,""),void 0)},u=r.$watch(t,o),o(u.value),{owner:!0}}},t.html={priority:100,init:function(n,t,r,e){var i,o,u;return i=null,u=function(t){return i&&(i.$destroy(),i=null),t?(f$.html(n,t),i=r.$new(),alight.applyBindings(i,n,{skip_attr:e.attrName})):(f$.html(n,""),void 0)},o=r.$watch(t,u),u(o.value),{owner:!0}}},alight.directives.bo["switch"]={priority:500,init:function(n,t,r,e){var i;return i=r.$new(),i.$switch={value:r.$eval(t),on:!1},alight.applyBindings(i,n,{skip_attr:e.attrName}),{owner:!0}}},alight.directives.bo.switchWhen={priority:500,init:function(n,t,r){return r.$switch.value!==t?(f$.remove(n),{owner:!0}):r.$switch.on=!0}},alight.directives.bo.switchDefault={priority:500,init:function(n,t,r){return r.$switch.on?(f$.remove(n),{owner:!0}):null}},t.src=function(n,t,r){var e,i;return i=function(t){return t||(t=""),f$.attr(n,"src",t)},e=r.$watchText(t,i),i(e.value)},alight.directives.bo.src=function(n,t,r){var e;return e=r.$evalText(t),e?f$.attr(n,"src",e):void 0},t.enable=function(n,t,r){var e,i;return e=function(t){return t?f$.removeAttr(n,"disabled"):f$.attr(n,"disabled","disabled")},i=r.$watch(t,e),e(i.value)},t.disable=function(n,t,r){var e,i;return e=function(t){return t?f$.attr(n,"disabled","disabled"):f$.removeAttr(n,"disabled")},i=r.$watch(t,e),e(i.value)},t.readonly=function(n,t,r){var e,i;return e=function(t){return f$.prop(n,"readOnly",!!t)},i=r.$watch(t,e),e(i.value)},c=["keydown","keypress","keyup","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","focus","blur","change"],o=function(n){return t[n]=function(t,r,e){var i;return i={start:function(){return i.makeCaller(),i.onDom()},makeCaller:function(){return i.caller=e.$compile(r,{no_return:!0,input:["$event"]})},onDom:function(){return f$.on(t,n,i.callback)},callback:function(n){return i.caller(n),e.$scan()}}}},u=0,a=c.length;a>u;u++)r=c[u],o(r);t.cloak=function(n,t,r,e){return f$.removeAttr(n,e.attrName),t?f$.removeClass(n,t):void 0},t.focused=function(n,t,r){var e,i;return e=!1,i={changing:!1,updateModel:function(n){return i.changing?void 0:(i.changing=!0,r.$setValue(t,n),r.$scan(function(){return i.changing=!1}))},onDom:function(){return f$.on(n,"focus",function(){return i.updateModel(!0)}),f$.on(n,"blur",function(){return i.updateModel(!1)})},updateDom:function(t){return i.changing?void 0:(i.changing=!0,t?f$.focus(n):f$.blur(n),i.changing=!1)},watchModel:function(){var n;return n=r.$watch(t,i.updateDom),e=n.value},initDom:function(){return i.updateDom(e)},start:function(){return i.onDom(),i.watchModel(),i.initDom()}}}}).call(this);(function(){alight.directives.al.repeat={priority:1e3,init:function(e,t,n,r){var i;return i={owner:!0,start:function(){return i.prepare(),i.parsExpression(),i.prepareDom(),i.watchModel(),i.initUpdateDom()},prepare:function(){var e,t,n,a,l;for(l=r.attributes,n=0,a=l.length;a>n;n++)if(e=l[n],"al-controller"===e.attrName){e.skip=!0,t=e.value;break}return i.childController=t?alight.getController(t):null},parsExpression:function(){var e;if(e=t.match(/\s*([\d\w]+)\s+in\s+(.+)\s+track\s+by\s+(.+)/))return i.nameOfKey=e[1],i.expression=e[2],i.trackExpression=e[3];if(e=t.match(/\s*([\d\w]+)\s+in\s+(.+)/),!e)throw"Wrong repeat: "+t;return i.nameOfKey=e[1],i.expression=e[2]},watchModel:function(){return i.watch=n.$watch(i.expression,i.updateDom,!0)},initUpdateDom:function(){return i.updateDom(i.watch.value)},prepareDom:function(){return i.base_element=e,i.top_element=f$.createComment(" "+t+" "),f$.before(e,i.top_element),f$.remove(e)},makeChild:function(e,t,r){var a;return a=n.$new(),i.updateChild(a,e,t,r),i.childController&&i.childController(a),a},updateChild:function(e,t,n,r){return e[i.nameOfKey]=t,e.$index=n,e.$first=0===n,e.$last=n===r.length-1},rawUpdateDom:function(e,t){var n,r,i,a,l,o,p;for(i=0,l=e.length;l>i;i++)n=e[i],f$.remove(n);for(p=[],a=0,o=t.length;o>a;a++)r=t[a],p.push(f$.after(r.after,r.element));return p},updateDom:function(){var t,a,l,o,p;return p=[],o={},a=null,l=0,t=null,function(u){var s,c,f,m,h,d,v,x,$,g,w,D,_,k,C,y,b,E,U;for(a||("$index"===i.trackExpression?a=function(e){var n;return t=l,n=o[t],n&&n.item===e?n:null}:i.trackExpression?(D=n.$compile(i.trackExpression,{input:["$id",i.nameOfKey]}),k=function(e){var t;return(t=e.$alite_id)?t:t=e.$alite_id=alight.utilits.getId()},a=function(e){return t=D(k,e),t?o[t]:null}):a=function(e){return(t=e.$alite_id)?o[t]:(t=alight.utilits.getId(),e.$alite_id=t,null)}),u&&u.length||(u=[]),d=i.top_element,c=[],$=[],_=0,b=p.length;b>_;_++)x=p[_],x.active=!1;for(l=C=0,E=u.length;E>C;l=++C)m=u[l],x=a(m),x&&(x.active=!0);for(f=function(){var e,t,n;for(n=[],e=0,t=p.length;t>e;e++)x=p[e],x.active||(x.prev&&(x.prev.next=x.next),x.next&&(x.next.prev=x.prev),delete o[x.$id],x.scope.$destroy(),n.push(x.element));return n}(),g=null,w=null,l=y=0,U=u.length;U>y;l=++y)if(m=u[l],h=m,m=m||{},x=a(m)){if(i.updateChild(x.scope,m,l,u),x.prev===w){w=x,d=x.element,x.active=!0,$.push(x);continue}x.prev=w,w&&(w.next=x),c.push({element:x.element,after:w?w.element:i.top_element}),d=x.element,w=x,x.active=!0,$.push(x)}else s=i.makeChild(h,l,u),e=f$.clone(i.base_element),alight.applyBindings(s,e,{skip_attr:r.attrName}),c.push({element:e,after:d}),x={$id:t,scope:s,element:e,prev:w,next:null,active:!0,item:m},o[t]=x,w?(v=w.next,w.next=x,x.next=v,v&&(v.prev=x)):0===l&&p[0]&&(v=p[0],x.next=v,v.prev=x),w=x,d=e,$.push(x);return p=$,i.rawUpdateDom(f,c)}}()}}},alight.directives.bo.repeat={priority:1e3,init:function(e,t,n,r){var i;return i=alight.directives.al.repeat.init(e,t,n,r),i.start=function(){return i.prepare(),i.parsExpression(),i.prepareDom(),i.watch={value:n.$eval(i.expression)},i.initUpdateDom()},i}}}).call(this);(function(){var e;alight.filters.filter=function(e,t){var n;return n=t.$compile(e),function(e){var t,r,i,o,f,u,l;if(r=n(),!r)return e;if("string"==typeof r)r={$:r};else if("object"!=typeof r)return e;return u=function(){var n,u,a;for(a=[],n=0,u=e.length;u>n;n++)if(f=e[n],"object"==typeof f){if(i=!0,r.$){i=!1,t=r.$.toLowerCase();for(o in f)if(l=f[o],(""+l).toLowerCase().indexOf(t)>=0){i=!0;break}if(!i)continue}i=!0;for(o in r)if(l=r[o],t=f[o],t&&0>(""+t).toLowerCase().indexOf((""+l).toLowerCase())){i=!1;break}if(!i)continue;a.push(f)}else{if(!r.$)continue;if(t=r.$.toLowerCase(),0>(""+f).toLowerCase().indexOf(t))continue;a.push(f)}return a}()}},alight.filters.slice=function(e,t){var n;return n=t.$compile("["+e+"]"),function(e){return[].slice.apply(e,n())}},e=function(e){return 10>e?"0"+e:""+e},alight.filters.date=function(t){return function(n){var r,i,o,f,u;if(!n)return"";for(o=[[/yyyy/g,n.getFullYear()],[/mm/g,e(n.getMonth()+1)],[/dd/g,e(n.getDate())]],i=t,f=0,u=o.length;u>f;f++)r=o[f],i=i.replace(r[0],r[1]);return i}},alight.filters.generator=function(){var e;return e=[],function(t){if(e.length>=t)e.length=t;else for(;t>e.length;)e.push({});return e}}}).call(this);